P52:C++ å¤„ç†å¤šè¿”å›å€¼çš„è¿‡ç¨‹
åœ¨**C++\**ç¼–ç¨‹ä¸­ï¼Œ\*\*å¤šè¿”å›å€¼å¤„ç†\*\*æ˜¯ä¸€ä¸ªå¸¸è§ä¸”é‡è¦çš„é—®é¢˜ã€‚æœ‰æ•ˆåœ°å¤„ç†å¤šä¸ªè¿”å›å€¼ä¸ä»…èƒ½æå‡ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ï¼Œè¿˜èƒ½å¢å¼ºç¨‹åºçš„åŠŸèƒ½æ€§ã€‚æœ¬æ–‡å°†åŸºäº\**Cherno C++ç¬”è®° P52**ï¼Œè¯¦ç»†è§£æC++ä¸­å¤šè¿”å›å€¼çš„å¤„ç†æ–¹æ³•ï¼Œå¹¶é€šè¿‡ç¤ºä¾‹ä»£ç ã€å¯¹æ¯”è¡¨æ ¼å’Œæµç¨‹å›¾ï¼Œå¸®åŠ©è¯»è€…å…¨é¢ç†è§£å’ŒæŒæ¡è¿™ä¸€æ¦‚å¿µã€‚ğŸ“š

### ä¸€ã€å¤šè¿”å›å€¼å¤„ç†çš„å¿…è¦æ€§

åœ¨å®é™…å¼€å‘ä¸­ï¼Œå‡½æ•°é€šå¸¸éœ€è¦è¿”å›å¤šä¸ªç›¸å…³çš„æ•°æ®ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªå‡½æ•°å¯èƒ½éœ€è¦è¿”å›è®¡ç®—ç»“æœä»¥åŠçŠ¶æ€ç ã€‚ç”±äºC++çš„å‡½æ•°é»˜è®¤åªèƒ½è¿”å›ä¸€ä¸ªå€¼ï¼Œå› æ­¤éœ€è¦é‡‡ç”¨ç‰¹å®šçš„æ–¹æ³•æ¥å®ç°å¤šè¿”å›å€¼çš„éœ€æ±‚ã€‚

### äºŒã€å¸¸è§çš„å¤šè¿”å›å€¼å¤„ç†æ–¹æ³•

#### 1. ä½¿ç”¨ `std::pair` å’Œ `std::tuple`

**`std::pair`** å’Œ **`std::tuple`** æ˜¯C++æ ‡å‡†åº“ä¸­æä¾›çš„ç”¨äºå­˜å‚¨å¤šä¸ªå€¼çš„å®¹å™¨ã€‚å®ƒä»¬å¯ä»¥æ–¹ä¾¿åœ°å°†å¤šä¸ªä¸åŒç±»å‹çš„å€¼ç»„åˆåœ¨ä¸€èµ·è¿”å›ã€‚

#### ç¤ºä¾‹ï¼šä½¿ç”¨ `std::pair`

```cpp
#include <iostream>
#include <utility> // åŒ…å«std::pair

std::pair<int, double> getValues() {
    int a = 10;
    double b = 20.5;
    return std::make_pair(a, b);
}

int main() {
    std::pair<int, double> result = getValues();
    std::cout << "æ•´æ•°: " << result.first << ", æµ®ç‚¹æ•°: " << result.second << std::endl;
    return 0;
}
```

**è§£é‡Š**ï¼š

- `std::pair<int, double>` å®šä¹‰äº†ä¸€ä¸ªåŒ…å« `int` å’Œ `double` ç±»å‹çš„é…å¯¹ã€‚
- `getValues` å‡½æ•°è¿”å›ä¸€ä¸ª `std::pair`ï¼Œå…¶ä¸­åŒ…å«ä¸¤ä¸ªå€¼ã€‚
- åœ¨ `main` å‡½æ•°ä¸­ï¼Œé€šè¿‡ `result.first` å’Œ `result.second` è®¿é—®è¿”å›çš„å€¼ã€‚

#### ç¤ºä¾‹ï¼šä½¿ç”¨ `std::tuple`

```cpp
#include <iostream>
#include <tuple> // åŒ…å«std::tuple

std::tuple<int, double, std::string> getMultipleValues() {
    return std::make_tuple(1, 3.14, "C++");
}

int main() {
    auto [a, b, c] = getMultipleValues();
    std::cout << "æ•´æ•°: " << a << ", æµ®ç‚¹æ•°: " << b << ", å­—ç¬¦ä¸²: " << c << std::endl;
    return 0;
}
```

**è§£é‡Š**ï¼š

- `std::tuple<int, double, std::string>` å®šä¹‰äº†ä¸€ä¸ªåŒ…å« `int`ã€`double` å’Œ `std::string` ç±»å‹çš„å…ƒç»„ã€‚
- `getMultipleValues` å‡½æ•°è¿”å›ä¸€ä¸ª `std::tuple`ï¼Œå…¶ä¸­åŒ…å«ä¸‰ä¸ªå€¼ã€‚
- åœ¨ `main` å‡½æ•°ä¸­ï¼Œé€šè¿‡ç»“æ„åŒ–ç»‘å®šï¼ˆC++17ç‰¹æ€§ï¼‰ç›´æ¥è§£æ„å…ƒç»„ä¸­çš„å€¼ã€‚

#### 2. ä½¿ç”¨ç»“æ„ä½“ï¼ˆ`struct`ï¼‰

å®šä¹‰ä¸€ä¸ªç»“æ„ä½“ï¼Œå°†å¤šä¸ªç›¸å…³çš„æ•°æ®æˆå‘˜ç»„åˆåœ¨ä¸€èµ·è¿”å›ã€‚è¿™ç§æ–¹æ³•å…·æœ‰æ›´å¥½çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ï¼Œç‰¹åˆ«æ˜¯å½“è¿”å›å€¼è¾ƒå¤šæˆ–å…·æœ‰æ˜ç¡®å«ä¹‰æ—¶ã€‚

#### ç¤ºä¾‹ï¼šä½¿ç”¨ç»“æ„ä½“

```cpp
#include <iostream>
#include <string>

// å®šä¹‰ç»“æ„ä½“
struct Result {
    int code;
    double value;
    std::string message;
};

// å‡½æ•°è¿”å›ç»“æ„ä½“
Result getResult() {
    Result res;
    res.code = 200;
    res.value = 99.99;
    res.message = "æˆåŠŸ";
    return res;
}

int main() {
    Result result = getResult();
    std::cout << "ä»£ç : " << result.code 
              << ", å€¼: " << result.value 
              << ", ä¿¡æ¯: " << result.message << std::endl;
    return 0;
}
```

**è§£é‡Š**ï¼š

- å®šä¹‰äº†ä¸€ä¸ª `Result` ç»“æ„ä½“ï¼ŒåŒ…å« `code`ã€`value` å’Œ `message` ä¸‰ä¸ªæˆå‘˜ã€‚
- `getResult` å‡½æ•°è¿”å›ä¸€ä¸ª `Result` ç»“æ„ä½“å®ä¾‹ï¼ŒåŒ…å«å¤šä¸ªç›¸å…³çš„æ•°æ®ã€‚
- åœ¨ `main` å‡½æ•°ä¸­ï¼Œé€šè¿‡ `result.code`ã€`result.value` å’Œ `result.message` è®¿é—®è¿”å›çš„å€¼ã€‚

#### 3. ä½¿ç”¨å¼•ç”¨å‚æ•°

é€šè¿‡ä¼ é€’å¼•ç”¨å‚æ•°ï¼Œè®©å‡½æ•°åœ¨è°ƒç”¨æ—¶ä¿®æ”¹å¤–éƒ¨å˜é‡ï¼Œä»è€Œå®ç°å¤šè¿”å›å€¼çš„æ•ˆæœã€‚è¿™ç§æ–¹æ³•é¿å…äº†é¢å¤–çš„æ•°æ®ç»“æ„ï¼Œä½†å¯èƒ½é™ä½ä»£ç çš„å¯è¯»æ€§ã€‚

#### ç¤ºä¾‹ï¼šä½¿ç”¨å¼•ç”¨å‚æ•°

```cpp
#include <iostream>
#include <string>

void getValues(int& code, double& value, std::string& message) {
    code = 404;
    value = 0.0;
    message = "æœªæ‰¾åˆ°";
}

int main() {
    int code;
    double value;
    std::string message;

    getValues(code, value, message);

    std::cout << "ä»£ç : " << code 
              << ", å€¼: " << value 
              << ", ä¿¡æ¯: " << message << std::endl;
    return 0;
}
```

**è§£é‡Š**ï¼š

- `getValues` å‡½æ•°é€šè¿‡å¼•ç”¨å‚æ•°ä¿®æ”¹å¤–éƒ¨å˜é‡çš„å€¼ã€‚
- åœ¨ `main` å‡½æ•°ä¸­ï¼Œå®šä¹‰äº† `code`ã€`value` å’Œ `message` å˜é‡ï¼Œå¹¶å°†å®ƒä»¬ä¼ é€’ç»™ `getValues`ã€‚
- å‡½æ•°æ‰§è¡Œåï¼Œå¤–éƒ¨å˜é‡è¢«èµ‹äºˆæ–°çš„å€¼ã€‚

#### 4. ä½¿ç”¨ `std::optional`ï¼ˆC++17åŠä»¥ä¸Šï¼‰

å½“è¿”å›å€¼ä¸­æŸäº›å€¼å¯èƒ½ä¸å­˜åœ¨æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ `std::optional` æ¥è¡¨ç¤ºå¯èƒ½çš„ç¼ºå¤±ã€‚è¿™å¯¹äºå¤„ç†é”™è¯¯æˆ–å¼‚å¸¸æƒ…å†µéå¸¸æœ‰ç”¨ã€‚

##### ç¤ºä¾‹ï¼šä½¿ç”¨ `std::optional`

```cpp
#include <iostream>
#include <optional>
#include <string>

struct Data {
    int id;
    std::string name;
};

// å‡½æ•°è¿”å› std::optional<Data>
std::optional<Data> findData(int id) {
    if (id == 1) {
        return Data{1, "Alice"};
    } else {
        return std::nullopt; // è¡¨ç¤ºæ— ç»“æœ
    }
}

int main() {
    int searchId = 2;
    std::optional<Data> result = findData(searchId);

    if (result) {
        std::cout << "æ‰¾åˆ°æ•°æ®: ID = " << result->id 
                  << ", åç§° = " << result->name << std::endl;
    } else {
        std::cout << "æœªæ‰¾åˆ°å¯¹åº”çš„æ•°æ®ã€‚" << std::endl;
    }

    return 0;
}
```

**è§£é‡Š**ï¼š

- å®šä¹‰äº†ä¸€ä¸ª `Data` ç»“æ„ä½“ï¼ŒåŒ…å« `id` å’Œ `name`ã€‚
- `findData` å‡½æ•°å°è¯•æŸ¥æ‰¾æ•°æ®ï¼Œå¦‚æœæ‰¾åˆ°åˆ™è¿”å› `Data`ï¼Œå¦åˆ™è¿”å› `std::nullopt`ã€‚
- åœ¨ `main` å‡½æ•°ä¸­ï¼Œé€šè¿‡æ£€æŸ¥ `result` æ˜¯å¦æœ‰å€¼æ¥å†³å®šè¾“å‡ºå†…å®¹ã€‚

### ä¸‰ã€å¯¹æ¯”åˆ†æ

ä»¥ä¸‹è¡¨æ ¼æ€»ç»“äº†ä¸åŒå¤šè¿”å›å€¼å¤„ç†æ–¹æ³•çš„**ä¼˜ç¼ºç‚¹**ï¼Œå¸®åŠ©å¼€å‘è€…æ ¹æ®å®é™…éœ€æ±‚é€‰æ‹©åˆé€‚çš„æ–¹æ¡ˆã€‚

| **æ–¹æ³•**            | **ä¼˜ç‚¹**                                 | **ç¼ºç‚¹**                                       |
| :------------------ | :--------------------------------------- | :--------------------------------------------- |
| **`std::pair`**     | ç®€å•ã€è½»é‡ï¼Œé€‚ç”¨äºä¸¤ä¸ªç›¸å…³å€¼çš„è¿”å›       | å¯è¯»æ€§è¾ƒå·®ï¼Œæˆå‘˜å‘½åä¸º `first`å’Œ `second`      |
| **`std::tuple`**    | æ”¯æŒå¤šä¸ªè¿”å›å€¼ï¼Œé€‚ç”¨äºä¸åŒç±»å‹çš„ç»„åˆ     | å¯è¯»æ€§è¾ƒä½ï¼Œéœ€ä½¿ç”¨ç»“æ„åŒ–ç»‘å®šæˆ– `std::get`      |
| **ç»“æ„ä½“**          | é«˜å¯è¯»æ€§ï¼Œæˆå‘˜æœ‰æ˜ç¡®å‘½åï¼Œä¾¿äºç»´æŠ¤       | éœ€è¦é¢å¤–å®šä¹‰ç»“æ„ä½“ï¼Œé€‚ç”¨äºå¤æ‚è¿”å›å€¼           |
| **å¼•ç”¨å‚æ•°**        | é¿å…äº†é¢å¤–çš„æ•°æ®ç»“æ„ï¼Œé€‚ç”¨äºç®€å•åœºæ™¯     | ä»£ç å¯è¯»æ€§å·®ï¼Œæ˜“å‡ºé”™ï¼Œè°ƒç”¨æ–¹éœ€è¦é¢„å…ˆå®šä¹‰å˜é‡   |
| **`std::optional`** | é€‚ç”¨äºå¯èƒ½ç¼ºå¤±çš„è¿”å›å€¼ï¼Œå¢å¼ºä»£ç çš„å¥å£®æ€§ | ä»…é€‚ç”¨äºå•ä¸€è¿”å›å€¼çš„å¯é€‰æƒ…å†µï¼Œä¸é€‚ç”¨äºå¤šè¿”å›å€¼ |

### å››ã€å·¥ä½œæµç¨‹å›¾

ä»¥ä¸‹æ˜¯ä½¿ç”¨ `std::pair` å¤„ç†å¤šè¿”å›å€¼çš„å·¥ä½œæµç¨‹å›¾ï¼Œå¸®åŠ©ç›´è§‚ç†è§£æ•´ä¸ªè¿‡ç¨‹ã€‚ğŸ“Š

è°ƒç”¨å‡½æ•°å‡½æ•°æ‰§è¡Œè¿”å› std::pairè·å– first æˆå‘˜è·å– second æˆå‘˜ä½¿ç”¨ first çš„å€¼ä½¿ç”¨ second çš„å€¼ç»§ç»­åç»­æ“ä½œ

**è§£é‡Š**ï¼š

- **è°ƒç”¨å‡½æ•°**ï¼šä¸»ç¨‹åºè°ƒç”¨è¿”å› `std::pair` çš„å‡½æ•°ã€‚
- **å‡½æ•°æ‰§è¡Œ**ï¼šå‡½æ•°å†…éƒ¨æ‰§è¡Œé€»è¾‘ï¼Œç”Ÿæˆ `std::pair`ã€‚
- **è¿”å› std::pair**ï¼šå‡½æ•°è¿”å› `std::pair` å¯¹è±¡ã€‚
- **è·å–æˆå‘˜**ï¼šé€šè¿‡ `first` å’Œ `second` æˆå‘˜è·å–è¿”å›çš„å€¼ã€‚
- **ä½¿ç”¨å€¼**ï¼šåœ¨ä¸»ç¨‹åºä¸­ä½¿ç”¨è·å–çš„å€¼è¿›è¡Œåç»­æ“ä½œã€‚

### äº”ã€å®ç”¨ç¤ºä¾‹

ä»¥ä¸‹ç¤ºä¾‹å±•ç¤ºäº†åœ¨å®é™…å¼€å‘ä¸­å¦‚ä½•é€‰æ‹©å’Œä½¿ç”¨å¤šè¿”å›å€¼å¤„ç†æ–¹æ³•ï¼Œä»¥æå‡ä»£ç çš„æ•ˆç‡å’Œå¯ç»´æŠ¤æ€§ã€‚

### ç¤ºä¾‹1ï¼šä½¿ç”¨ç»“æ„ä½“è¿”å›å¤šä¸ªç›¸å…³å€¼

```cpp
#include <iostream>
#include <string>

// å®šä¹‰ç»“æ„ä½“ç”¨äºè¿”å›å¤šä¸ªå€¼
struct Person {
    std::string name;
    int age;
};

// å‡½æ•°è¿”å›ç»“æ„ä½“
Person createPerson(const std::string& name, int age) {
    Person p;
    p.name = name;
    p.age = age;
    return p;
}

int main() {
    Person person = createPerson("å¼ ä¸‰", 30);
    std::cout << "å§“å: " << person.name << ", å¹´é¾„: " << person.age << "å²" << std::endl;
    return 0;
}
```

**è§£é‡Š**ï¼š

- å®šä¹‰äº†ä¸€ä¸ª `Person` ç»“æ„ä½“ï¼ŒåŒ…å« `name` å’Œ `age`ã€‚
- `createPerson` å‡½æ•°è¿”å›ä¸€ä¸ª `Person` å®ä¾‹ã€‚
- åœ¨ `main` å‡½æ•°ä¸­ï¼Œè°ƒç”¨ `createPerson` å¹¶ä½¿ç”¨è¿”å›çš„ç»“æ„ä½“æ•°æ®ã€‚

### ç¤ºä¾‹2ï¼šä½¿ç”¨ `std::tuple` å¤„ç†å¤šä¸ªè¿”å›å€¼

```cpp
#include <iostream>
#include <tuple>
#include <string>

// å‡½æ•°è¿”å› std::tuple
std::tuple<int, double, std::string> getStatistics() {
    int count = 100;
    double average = 75.5;
    std::string status = "æ­£å¸¸";
    return std::make_tuple(count, average, status);
}

int main() {
    auto [count, average, status] = getStatistics();
    std::cout << "æ•°é‡: " << count 
              << ", å¹³å‡å€¼: " << average 
              << ", çŠ¶æ€: " << status << std::endl;
    return 0;
}
```

**è§£é‡Š**ï¼š

- `getStatistics` å‡½æ•°è¿”å›ä¸€ä¸ªåŒ…å« `int`ã€`double` å’Œ `std::string` çš„å…ƒç»„ã€‚
- åœ¨ `main` å‡½æ•°ä¸­ï¼Œä½¿ç”¨ç»“æ„åŒ–ç»‘å®šç›´æ¥è§£æ„å…ƒç»„ä¸­çš„å€¼ï¼Œæé«˜ä»£ç çš„ç®€æ´æ€§ã€‚

### å…­ã€æ€»ç»“

åœ¨**C++**ä¸­å¤„ç†å¤šè¿”å›å€¼æœ‰å¤šç§æ–¹æ³•ï¼Œæ¯ç§æ–¹æ³•éƒ½æœ‰å…¶é€‚ç”¨çš„åœºæ™¯å’Œä¼˜ç¼ºç‚¹ã€‚é€šè¿‡åˆç†é€‰æ‹©å’Œåº”ç”¨è¿™äº›æ–¹æ³•ï¼Œå¼€å‘è€…å¯ä»¥ç¼–å†™å‡ºæ›´é«˜æ•ˆã€å¯è¯»æ€§æ›´å¼ºçš„ä»£ç ã€‚ğŸ”§

**å…³é”®ç‚¹å›é¡¾**ï¼š

- **`std::pair` å’Œ `std::tuple`**ï¼šé€‚ç”¨äºç®€å•å’Œå¤šæ ·åŒ–çš„è¿”å›å€¼ç»„åˆï¼Œä½†å¯è¯»æ€§è¾ƒä½ã€‚
- **ç»“æ„ä½“**ï¼šæä¾›é«˜å¯è¯»æ€§å’Œç»´æŠ¤æ€§ï¼Œé€‚ç”¨äºå¤æ‚çš„è¿”å›å€¼ã€‚
- **å¼•ç”¨å‚æ•°**ï¼šé¿å…é¢å¤–çš„æ•°æ®ç»“æ„ï¼Œä½†éœ€è°¨æ…ä½¿ç”¨ä»¥é˜²å‡ºé”™ã€‚
- **`std::optional`**ï¼šå¢å¼ºä»£ç çš„å¥å£®æ€§ï¼Œé€‚ç”¨äºå¯èƒ½ç¼ºå¤±çš„å•ä¸€è¿”å›å€¼æƒ…å†µã€‚

é€šè¿‡æ·±å…¥ç†è§£å’ŒæŒæ¡è¿™äº›å¤šè¿”å›å€¼å¤„ç†æ–¹æ³•ï¼Œæ‚¨å¯ä»¥åœ¨C++ç¼–ç¨‹ä¸­æ›´åŠ çµæ´»åœ°åº”å¯¹å„ç§å¤æ‚éœ€æ±‚ï¼Œæå‡å¼€å‘æ•ˆç‡å’Œä»£ç è´¨é‡ã€‚ğŸš€

**é‡è¦æç¤º**ï¼šåœ¨å®é™…å¼€å‘ä¸­ï¼Œé€‰æ‹©åˆé€‚çš„å¤šè¿”å›å€¼å¤„ç†æ–¹æ³•åº”åŸºäºå…·ä½“çš„éœ€æ±‚å’Œé¡¹ç›®ç‰¹ç‚¹ï¼Œåˆç†æƒè¡¡å¯è¯»æ€§ã€ç»´æŠ¤æ€§ä¸æ€§èƒ½ï¼Œç¡®ä¿ä»£ç çš„é«˜æ•ˆä¸ç¨³å®šã€‚

----------------------------------------------------------------------------------------------------------------------------
